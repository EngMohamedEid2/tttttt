import{a as d,M as o,N as m,Q as p,u,$ as c,W as f}from"./DzwC5H-t.js";import{i as I}from"./WzxQA1z2.js";import{c as b}from"./B5liTZtu.js";function S({initialValues:i,inputs:a}){var e=i,a=a;e&&Object.keys(a).forEach(t=>{var l,r;if(!a[t].ignore)if(a[t].mapKey){let s=D({initialData:e,mapKey:a[t].mapKey});a[t].data=s}else a[t].data=e[t],((l=a[t])==null?void 0:l.type)=="multiSelect"&&((r=e[t])!=null&&r.length&&(a[t].data=e[t].map(s=>s.id)),a[t].selected=e[t]),a[t].isImage&&(a[t].multiple?(a[t].data=e[t.split("_id")[0]].map(s=>s.id)||[],a[t].selected=e[t.split("_id")[0]]):(a[t].data=e[t],a[t].selected=e[t.split("_id")[0]])),a[t].type&&a[t].type=="dropdown"&&(a[t].data=e[t],a[t].selected={name:e[t],value:e[t]},a[t].displayValue=e[t])})}function D({initialData:i,mapKey:n}){let e=n.split("."),a=_.cloneDeep(i);return e.forEach(t=>{a=a[t]}),a}const V={__name:"Form",props:{OnSubmit:Function,Inputs:Object,NotRequiredFields:{type:Array,default:[]},InitialData:Object,Classes:String},setup(i,{expose:n}){let e=i,a=d({IsValid:!1,data:{},IsSubmitted:!1});e.InitialData&&S({initialValues:e.InitialData,inputs:e.Inputs});const t=()=>{a.value.IsSubmitted=!0,I({FormData:e.Inputs,notRequired:e.NotRequiredFields})&&(a.value.IsValid=!0,a.value.data=b({data:e.Inputs}),e.OnSubmit&&e.OnSubmit(a.value.data))};return n({HandleSubmit:t}),(l,r)=>(o(),m("form",{onSubmit:c(t,["prevent"]),class:f(i.Classes)},[p(l.$slots,"default",{FormData:u(a),submit:t,FormSubmitted:u(a).IsSubmitted})],34))}};export{V as default};
